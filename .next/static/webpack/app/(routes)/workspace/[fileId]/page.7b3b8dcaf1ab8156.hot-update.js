"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/(routes)/workspace/[fileId]/page",{

/***/ "(app-pages-browser)/./app/(routes)/workspace/_components/Canvas.tsx":
/*!*******************************************************!*\
  !*** ./app/(routes)/workspace/_components/Canvas.tsx ***!
  \*******************************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react_draggable__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-draggable */ \"(app-pages-browser)/./node_modules/react-draggable/build/cjs/cjs.js\");\n/* harmony import */ var react_draggable__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_draggable__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var react_dnd__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-dnd */ \"(app-pages-browser)/./node_modules/react-dnd/dist/hooks/useDrop/useDrop.js\");\n/* harmony import */ var html2canvas__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! html2canvas */ \"(app-pages-browser)/./node_modules/html2canvas/dist/html2canvas.js\");\n/* harmony import */ var html2canvas__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(html2canvas__WEBPACK_IMPORTED_MODULE_3__);\n\nvar _s = $RefreshSig$();\n\n\n\n\nconst Canvas = (param)=>{\n    let { fileId, onDragStart, draggedImage, onDropComplete, onComponentAdd, components, onComponentDelete } = param;\n    _s();\n    const canvasRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const [positions, setPositions] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({});\n    const [rotations, setRotations] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({});\n    const [contextMenu, setContextMenu] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({\n        visible: false,\n        x: 0,\n        y: 0,\n        instanceId: \"\"\n    });\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (!components) return;\n        const initialPositions = {};\n        const initialRotations = {};\n        components.forEach((comp)=>{\n            if (comp) {\n                initialPositions[comp.instanceId] = {\n                    x: comp.x,\n                    y: comp.y\n                };\n                initialRotations[comp.instanceId] = comp.rotation || 0;\n            }\n        });\n        setPositions(initialPositions);\n        setRotations(initialRotations);\n    }, [\n        components\n    ]);\n    const handleDrop = (item, dropX, dropY)=>{\n        if (onComponentAdd) {\n            const newComponent = {\n                ...item,\n                x: dropX,\n                y: dropY,\n                instanceId: \"\".concat(item.id, \"-\").concat(Date.now()),\n                rotation: 0\n            };\n            onComponentAdd(newComponent, \"add\");\n        }\n        onDropComplete();\n    };\n    const handleDragStop = (instanceId, data)=>{\n        if (!components) return;\n        const updatedPositions = {\n            ...positions,\n            [instanceId]: {\n                x: data.x,\n                y: data.y\n            }\n        };\n        setPositions(updatedPositions);\n        const component = components.find((comp)=>comp.instanceId === instanceId);\n        if (component && onComponentAdd) {\n            onComponentAdd({\n                ...component,\n                x: data.x,\n                y: data.y,\n                rotation: rotations[instanceId] || 0\n            }, \"move\");\n        }\n    };\n    const handleRotate = (instanceId, degrees)=>{\n        const currentRotation = rotations[instanceId] || 0;\n        const newRotation = (currentRotation + degrees) % 360;\n        setRotations((prev)=>({\n                ...prev,\n                [instanceId]: newRotation\n            }));\n        const component = components.find((comp)=>comp.instanceId === instanceId);\n        if (component && onComponentAdd) {\n            onComponentAdd({\n                ...component,\n                rotation: newRotation\n            }, \"move\");\n        }\n        setContextMenu({\n            visible: false,\n            x: 0,\n            y: 0,\n            instanceId: \"\"\n        });\n    };\n    const [{ isOver }, drop] = (0,react_dnd__WEBPACK_IMPORTED_MODULE_4__.useDrop)(()=>({\n            accept: \"libraryItem\",\n            drop: (item, monitor)=>{\n                const offset = monitor.getClientOffset();\n                if (offset && canvasRef.current) {\n                    const rect = canvasRef.current.getBoundingClientRect();\n                    const x = offset.x - rect.left;\n                    const y = offset.y - rect.top;\n                    handleDrop(item, x, y);\n                }\n            },\n            collect: (monitor)=>({\n                    isOver: !!monitor.isOver()\n                })\n        }));\n    const saveAsPNG = ()=>{\n        if (!canvasRef.current) return;\n        html2canvas__WEBPACK_IMPORTED_MODULE_3___default()(canvasRef.current).then((canvas)=>{\n            const link = document.createElement(\"a\");\n            link.download = \"canvas.png\";\n            link.href = canvas.toDataURL(\"image/png\");\n            link.click();\n        });\n    };\n    const printCanvas = ()=>{\n        if (!canvasRef.current) return;\n        html2canvas__WEBPACK_IMPORTED_MODULE_3___default()(canvasRef.current).then((canvas)=>{\n            const newWindow = window.open();\n            if (newWindow) {\n                newWindow.document.body.innerHTML = '<img src=\"'.concat(canvas.toDataURL(), '\" style=\"width:100%; height:auto;\">');\n                newWindow.print();\n            }\n        });\n    };\n    // Handle right-click to open context menu\n    const handleContextMenu = (e, instanceId)=>{\n        e.preventDefault();\n        setContextMenu({\n            visible: true,\n            x: e.clientX,\n            y: e.clientY,\n            instanceId\n        });\n    };\n    // Handle delete from context menu\n    const handleDelete = ()=>{\n        if (contextMenu.instanceId && onComponentDelete) {\n            onComponentDelete(contextMenu.instanceId);\n        }\n        setContextMenu({\n            visible: false,\n            x: 0,\n            y: 0,\n            instanceId: \"\"\n        });\n    };\n    // Hide context menu when clicking elsewhere\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        const handleClick = ()=>{\n            if (contextMenu.visible) {\n                setContextMenu({\n                    visible: false,\n                    x: 0,\n                    y: 0,\n                    instanceId: \"\"\n                });\n            }\n        };\n        document.addEventListener(\"click\", handleClick);\n        return ()=>{\n            document.removeEventListener(\"click\", handleClick);\n        };\n    }, [\n        contextMenu.visible\n    ]);\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"flex flex-col\",\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"w-full p-2\",\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    ref: (node)=>{\n                        drop(node);\n                        canvasRef.current = node;\n                    },\n                    className: \"relative bg-[#eff0f1] w-full h-[560px] \".concat(isOver ? \"border-2 border-blue-500\" : \"\"),\n                    children: [\n                        components === null || components === void 0 ? void 0 : components.map((item)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)((react_draggable__WEBPACK_IMPORTED_MODULE_2___default()), {\n                                defaultPosition: {\n                                    x: item.x,\n                                    y: item.y\n                                },\n                                position: positions[item.instanceId],\n                                onStop: (e, data)=>handleDragStop(item.instanceId, data),\n                                bounds: \"parent\",\n                                handle: \".drag-handle\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"absolute cursor-move\",\n                                    onContextMenu: (e)=>handleContextMenu(e, item.instanceId),\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"drag-handle w-12 h-12 relative\",\n                                        style: {\n                                            backgroundImage: \"url(\".concat(item.svg, \")\"),\n                                            backgroundSize: \"contain\",\n                                            backgroundRepeat: \"no-repeat\",\n                                            backgroundPosition: \"center\",\n                                            transform: \"rotate(\".concat(rotations[item.instanceId] || 0, \"deg)\"),\n                                            transition: \"transform 0.3s ease\"\n                                        }\n                                    }, void 0, false, {\n                                        fileName: \"E:\\\\6_semester\\\\software_project\\\\sprint_4\\\\newest\\\\erasor_clone-main_new - update\\\\powerdrafter\\\\app\\\\(routes)\\\\workspace\\\\_components\\\\Canvas.tsx\",\n                                        lineNumber: 213,\n                                        columnNumber: 17\n                                    }, undefined)\n                                }, void 0, false, {\n                                    fileName: \"E:\\\\6_semester\\\\software_project\\\\sprint_4\\\\newest\\\\erasor_clone-main_new - update\\\\powerdrafter\\\\app\\\\(routes)\\\\workspace\\\\_components\\\\Canvas.tsx\",\n                                    lineNumber: 209,\n                                    columnNumber: 15\n                                }, undefined)\n                            }, item.instanceId, false, {\n                                fileName: \"E:\\\\6_semester\\\\software_project\\\\sprint_4\\\\newest\\\\erasor_clone-main_new - update\\\\powerdrafter\\\\app\\\\(routes)\\\\workspace\\\\_components\\\\Canvas.tsx\",\n                                lineNumber: 201,\n                                columnNumber: 13\n                            }, undefined)),\n                        contextMenu.visible && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"fixed bg-white shadow-lg rounded-md py-2 z-50\",\n                            style: {\n                                top: contextMenu.y,\n                                left: contextMenu.x\n                            },\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                    className: \"w-full text-left px-4 py-2 hover:bg-gray-100\",\n                                    onClick: ()=>handleRotate(contextMenu.instanceId, 90),\n                                    children: \"Rotate 90\\xb0\"\n                                }, void 0, false, {\n                                    fileName: \"E:\\\\6_semester\\\\software_project\\\\sprint_4\\\\newest\\\\erasor_clone-main_new - update\\\\powerdrafter\\\\app\\\\(routes)\\\\workspace\\\\_components\\\\Canvas.tsx\",\n                                    lineNumber: 234,\n                                    columnNumber: 15\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                    className: \"w-full text-left px-4 py-2 hover:bg-gray-100\",\n                                    onClick: ()=>handleRotate(contextMenu.instanceId, 180),\n                                    children: \"Rotate 180\\xb0\"\n                                }, void 0, false, {\n                                    fileName: \"E:\\\\6_semester\\\\software_project\\\\sprint_4\\\\newest\\\\erasor_clone-main_new - update\\\\powerdrafter\\\\app\\\\(routes)\\\\workspace\\\\_components\\\\Canvas.tsx\",\n                                    lineNumber: 240,\n                                    columnNumber: 15\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                    className: \"w-full text-left px-4 py-2 hover:bg-gray-100 text-red-600\",\n                                    onClick: handleDelete,\n                                    children: \"Delete\"\n                                }, void 0, false, {\n                                    fileName: \"E:\\\\6_semester\\\\software_project\\\\sprint_4\\\\newest\\\\erasor_clone-main_new - update\\\\powerdrafter\\\\app\\\\(routes)\\\\workspace\\\\_components\\\\Canvas.tsx\",\n                                    lineNumber: 246,\n                                    columnNumber: 15\n                                }, undefined)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"E:\\\\6_semester\\\\software_project\\\\sprint_4\\\\newest\\\\erasor_clone-main_new - update\\\\powerdrafter\\\\app\\\\(routes)\\\\workspace\\\\_components\\\\Canvas.tsx\",\n                            lineNumber: 230,\n                            columnNumber: 13\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"E:\\\\6_semester\\\\software_project\\\\sprint_4\\\\newest\\\\erasor_clone-main_new - update\\\\powerdrafter\\\\app\\\\(routes)\\\\workspace\\\\_components\\\\Canvas.tsx\",\n                    lineNumber: 191,\n                    columnNumber: 9\n                }, undefined),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"mt-4 flex gap-4\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                            onClick: saveAsPNG,\n                            className: \"bg-blue-500 text-white px-4 py-2 rounded shadow hover:bg-blue-600\",\n                            children: \"Save as PNG\"\n                        }, void 0, false, {\n                            fileName: \"E:\\\\6_semester\\\\software_project\\\\sprint_4\\\\newest\\\\erasor_clone-main_new - update\\\\powerdrafter\\\\app\\\\(routes)\\\\workspace\\\\_components\\\\Canvas.tsx\",\n                            lineNumber: 257,\n                            columnNumber: 11\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                            onClick: printCanvas,\n                            className: \"bg-green-500 text-white px-4 py-2 rounded shadow hover:bg-green-600\",\n                            children: \"Print Canvas\"\n                        }, void 0, false, {\n                            fileName: \"E:\\\\6_semester\\\\software_project\\\\sprint_4\\\\newest\\\\erasor_clone-main_new - update\\\\powerdrafter\\\\app\\\\(routes)\\\\workspace\\\\_components\\\\Canvas.tsx\",\n                            lineNumber: 263,\n                            columnNumber: 11\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"E:\\\\6_semester\\\\software_project\\\\sprint_4\\\\newest\\\\erasor_clone-main_new - update\\\\powerdrafter\\\\app\\\\(routes)\\\\workspace\\\\_components\\\\Canvas.tsx\",\n                    lineNumber: 256,\n                    columnNumber: 9\n                }, undefined)\n            ]\n        }, void 0, true, {\n            fileName: \"E:\\\\6_semester\\\\software_project\\\\sprint_4\\\\newest\\\\erasor_clone-main_new - update\\\\powerdrafter\\\\app\\\\(routes)\\\\workspace\\\\_components\\\\Canvas.tsx\",\n            lineNumber: 190,\n            columnNumber: 7\n        }, undefined)\n    }, void 0, false, {\n        fileName: \"E:\\\\6_semester\\\\software_project\\\\sprint_4\\\\newest\\\\erasor_clone-main_new - update\\\\powerdrafter\\\\app\\\\(routes)\\\\workspace\\\\_components\\\\Canvas.tsx\",\n        lineNumber: 189,\n        columnNumber: 5\n    }, undefined);\n};\n_s(Canvas, \"XVDNZtwAU39Udb2B2FeQlin9YP0=\", false, function() {\n    return [\n        react_dnd__WEBPACK_IMPORTED_MODULE_4__.useDrop\n    ];\n});\n_c = Canvas;\n/* harmony default export */ __webpack_exports__[\"default\"] = (Canvas);\nvar _c;\n$RefreshReg$(_c, \"Canvas\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL2FwcC8ocm91dGVzKS93b3Jrc3BhY2UvX2NvbXBvbmVudHMvQ2FudmFzLnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUF3RTtBQUNoQztBQUNKO0FBRUU7QUFxQnRDLE1BQU1PLFNBQWdDO1FBQUMsRUFDckNDLE1BQU0sRUFDTkMsV0FBVyxFQUNYQyxZQUFZLEVBQ1pDLGNBQWMsRUFDZEMsY0FBYyxFQUNkQyxVQUFVLEVBQ1ZDLGlCQUFpQixFQUNsQjs7SUFDQyxNQUFNQyxZQUFZZCw2Q0FBTUEsQ0FBd0I7SUFDaEQsTUFBTSxDQUFDZSxXQUFXQyxhQUFhLEdBQUdkLCtDQUFRQSxDQUEyQyxDQUFDO0lBQ3RGLE1BQU0sQ0FBQ2UsV0FBV0MsYUFBYSxHQUFHaEIsK0NBQVFBLENBQXlCLENBQUM7SUFDcEUsTUFBTSxDQUFDaUIsYUFBYUMsZUFBZSxHQUFHbEIsK0NBQVFBLENBSzNDO1FBQ0RtQixTQUFTO1FBQ1RDLEdBQUc7UUFDSEMsR0FBRztRQUNIQyxZQUFZO0lBQ2Q7SUFFQXZCLGdEQUFTQSxDQUFDO1FBQ1IsSUFBSSxDQUFDVyxZQUFZO1FBRWpCLE1BQU1hLG1CQUE2RCxDQUFDO1FBQ3BFLE1BQU1DLG1CQUEyQyxDQUFDO1FBQ2xEZCxXQUFXZSxPQUFPLENBQUNDLENBQUFBO1lBQ2pCLElBQUlBLE1BQU07Z0JBQ1JILGdCQUFnQixDQUFDRyxLQUFLSixVQUFVLENBQUMsR0FBRztvQkFBRUYsR0FBR00sS0FBS04sQ0FBQztvQkFBRUMsR0FBR0ssS0FBS0wsQ0FBQztnQkFBQztnQkFDM0RHLGdCQUFnQixDQUFDRSxLQUFLSixVQUFVLENBQUMsR0FBR0ksS0FBS0MsUUFBUSxJQUFJO1lBQ3ZEO1FBQ0Y7UUFDQWIsYUFBYVM7UUFDYlAsYUFBYVE7SUFDZixHQUFHO1FBQUNkO0tBQVc7SUFFZixNQUFNa0IsYUFBYSxDQUFDQyxNQUFtQkMsT0FBZUM7UUFDcEQsSUFBSXRCLGdCQUFnQjtZQUNsQixNQUFNdUIsZUFBZTtn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Ozs7Ozs7Ozs4QkFPUCw4REFBQ0k7b0JBQUlDLFdBQVU7O3NDQUNiLDhEQUFDa0I7NEJBQ0NDLFNBQVM5Qzs0QkFDVDJCLFdBQVU7c0NBQ1g7Ozs7OztzQ0FHRCw4REFBQ2tCOzRCQUNDQyxTQUFTcEM7NEJBQ1RpQixXQUFVO3NDQUNYOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQU9YO0dBdlBNakY7O1FBNEZ1QkYsOENBQU9BOzs7S0E1RjlCRTtBQXlQTiwrREFBZUEsTUFBTUEsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9hcHAvKHJvdXRlcykvd29ya3NwYWNlL19jb21wb25lbnRzL0NhbnZhcy50c3g/YTRlZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHsgdXNlUmVmLCB1c2VFZmZlY3QsIHVzZVN0YXRlLCB1c2VDYWxsYmFjayB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IERyYWdnYWJsZSBmcm9tIFwicmVhY3QtZHJhZ2dhYmxlXCI7XG5pbXBvcnQgeyB1c2VEcm9wIH0gZnJvbSBcInJlYWN0LWRuZFwiO1xuaW1wb3J0IHsgTGlicmFyeUl0ZW0gfSBmcm9tIFwiLi9DYW52YXNTaWRlYmFyL0NvbXBvbmVudFBhbmVsXCI7XG5pbXBvcnQgaHRtbDJjYW52YXMgZnJvbSBcImh0bWwyY2FudmFzXCI7XG5pbXBvcnQgeyBhcGkgfSBmcm9tICdAL2NvbnZleC9fZ2VuZXJhdGVkL2FwaSc7XG5pbXBvcnQgeyBJZCB9IGZyb20gJ0AvY29udmV4L19nZW5lcmF0ZWQvZGF0YU1vZGVsJztcblxuaW50ZXJmYWNlIENhbnZhc0NvbXBvbmVudCBleHRlbmRzIExpYnJhcnlJdGVtIHtcbiAgeDogbnVtYmVyO1xuICB5OiBudW1iZXI7XG4gIGluc3RhbmNlSWQ6IHN0cmluZztcbiAgcm90YXRpb24/OiBudW1iZXI7IC8vIEFkZCByb3RhdGlvbiBwcm9wZXJ0eVxufVxuXG5pbnRlcmZhY2UgQ2FudmFzUHJvcHMge1xuICBmaWxlSWQ6IElkPFwiZmlsZXNcIj47XG4gIG9uRHJhZ1N0YXJ0OiAoZTogUmVhY3QuRHJhZ0V2ZW50PEhUTUxJbWFnZUVsZW1lbnQ+LCBzcmM6IHN0cmluZykgPT4gdm9pZDtcbiAgZHJhZ2dlZEltYWdlOiBzdHJpbmcgfCBudWxsO1xuICBvbkRyb3BDb21wbGV0ZTogKCkgPT4gdm9pZDtcbiAgb25Db21wb25lbnRBZGQ/OiAoY29tcG9uZW50OiBhbnksIGFjdGlvblR5cGU6IHN0cmluZykgPT4gdm9pZDtcbiAgY29tcG9uZW50czogQ2FudmFzQ29tcG9uZW50W107XG4gIG9uQ29tcG9uZW50RGVsZXRlPzogKGluc3RhbmNlSWQ6IHN0cmluZykgPT4gdm9pZDtcbn1cblxuY29uc3QgQ2FudmFzOiBSZWFjdC5GQzxDYW52YXNQcm9wcz4gPSAoe1xuICBmaWxlSWQsXG4gIG9uRHJhZ1N0YXJ0LFxuICBkcmFnZ2VkSW1hZ2UsXG4gIG9uRHJvcENvbXBsZXRlLFxuICBvbkNvbXBvbmVudEFkZCxcbiAgY29tcG9uZW50cyxcbiAgb25Db21wb25lbnREZWxldGVcbn0pID0+IHtcbiAgY29uc3QgY2FudmFzUmVmID0gdXNlUmVmPEhUTUxEaXZFbGVtZW50IHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IFtwb3NpdGlvbnMsIHNldFBvc2l0aW9uc10gPSB1c2VTdGF0ZTxSZWNvcmQ8c3RyaW5nLCB7IHg6IG51bWJlcjsgeTogbnVtYmVyIH0+Pih7fSk7XG4gIGNvbnN0IFtyb3RhdGlvbnMsIHNldFJvdGF0aW9uc10gPSB1c2VTdGF0ZTxSZWNvcmQ8c3RyaW5nLCBudW1iZXI+Pih7fSk7XG4gIGNvbnN0IFtjb250ZXh0TWVudSwgc2V0Q29udGV4dE1lbnVdID0gdXNlU3RhdGU8e1xuICAgIHZpc2libGU6IGJvb2xlYW47XG4gICAgeDogbnVtYmVyO1xuICAgIHk6IG51bWJlcjtcbiAgICBpbnN0YW5jZUlkOiBzdHJpbmc7XG4gIH0+KHtcbiAgICB2aXNpYmxlOiBmYWxzZSxcbiAgICB4OiAwLFxuICAgIHk6IDAsXG4gICAgaW5zdGFuY2VJZDogJydcbiAgfSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIWNvbXBvbmVudHMpIHJldHVybjtcbiAgICBcbiAgICBjb25zdCBpbml0aWFsUG9zaXRpb25zOiBSZWNvcmQ8c3RyaW5nLCB7IHg6IG51bWJlcjsgeTogbnVtYmVyIH0+ID0ge307XG4gICAgY29uc3QgaW5pdGlhbFJvdGF0aW9uczogUmVjb3JkPHN0cmluZywgbnVtYmVyPiA9IHt9O1xuICAgIGNvbXBvbmVudHMuZm9yRWFjaChjb21wID0+IHtcbiAgICAgIGlmIChjb21wKSB7XG4gICAgICAgIGluaXRpYWxQb3NpdGlvbnNbY29tcC5pbnN0YW5jZUlkXSA9IHsgeDogY29tcC54LCB5OiBjb21wLnkgfTtcbiAgICAgICAgaW5pdGlhbFJvdGF0aW9uc1tjb21wLmluc3RhbmNlSWRdID0gY29tcC5yb3RhdGlvbiB8fCAwO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHNldFBvc2l0aW9ucyhpbml0aWFsUG9zaXRpb25zKTtcbiAgICBzZXRSb3RhdGlvbnMoaW5pdGlhbFJvdGF0aW9ucyk7XG4gIH0sIFtjb21wb25lbnRzXSk7XG5cbiAgY29uc3QgaGFuZGxlRHJvcCA9IChpdGVtOiBMaWJyYXJ5SXRlbSwgZHJvcFg6IG51bWJlciwgZHJvcFk6IG51bWJlcikgPT4ge1xuICAgIGlmIChvbkNvbXBvbmVudEFkZCkge1xuICAgICAgY29uc3QgbmV3Q29tcG9uZW50ID0ge1xuICAgICAgICAuLi5pdGVtLFxuICAgICAgICB4OiBkcm9wWCxcbiAgICAgICAgeTogZHJvcFksXG4gICAgICAgIGluc3RhbmNlSWQ6IGAke2l0ZW0uaWR9LSR7RGF0ZS5ub3coKX1gLFxuICAgICAgICByb3RhdGlvbjogMFxuICAgICAgfTtcbiAgICAgIG9uQ29tcG9uZW50QWRkKG5ld0NvbXBvbmVudCwgJ2FkZCcpO1xuICAgIH1cbiAgICBvbkRyb3BDb21wbGV0ZSgpO1xuICB9O1xuXG4gIGNvbnN0IGhhbmRsZURyYWdTdG9wID0gKGluc3RhbmNlSWQ6IHN0cmluZywgZGF0YTogeyB4OiBudW1iZXI7IHk6IG51bWJlciB9KSA9PiB7XG4gICAgaWYgKCFjb21wb25lbnRzKSByZXR1cm47XG5cbiAgICBjb25zdCB1cGRhdGVkUG9zaXRpb25zID0ge1xuICAgICAgLi4ucG9zaXRpb25zLFxuICAgICAgW2luc3RhbmNlSWRdOiB7IHg6IGRhdGEueCwgeTogZGF0YS55IH1cbiAgICB9O1xuICAgIHNldFBvc2l0aW9ucyh1cGRhdGVkUG9zaXRpb25zKTtcbiAgICBcbiAgICBjb25zdCBjb21wb25lbnQgPSBjb21wb25lbnRzLmZpbmQoY29tcCA9PiBjb21wLmluc3RhbmNlSWQgPT09IGluc3RhbmNlSWQpO1xuICAgIGlmIChjb21wb25lbnQgJiYgb25Db21wb25lbnRBZGQpIHtcbiAgICAgIG9uQ29tcG9uZW50QWRkKHsgXG4gICAgICAgIC4uLmNvbXBvbmVudCwgXG4gICAgICAgIHg6IGRhdGEueCwgXG4gICAgICAgIHk6IGRhdGEueSxcbiAgICAgICAgcm90YXRpb246IHJvdGF0aW9uc1tpbnN0YW5jZUlkXSB8fCAwIFxuICAgICAgfSwgJ21vdmUnKTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlUm90YXRlID0gKGluc3RhbmNlSWQ6IHN0cmluZywgZGVncmVlczogbnVtYmVyKSA9PiB7XG4gICAgY29uc3QgY3VycmVudFJvdGF0aW9uID0gcm90YXRpb25zW2luc3RhbmNlSWRdIHx8IDA7XG4gICAgY29uc3QgbmV3Um90YXRpb24gPSAoY3VycmVudFJvdGF0aW9uICsgZGVncmVlcykgJSAzNjA7XG4gICAgXG4gICAgc2V0Um90YXRpb25zKHByZXYgPT4gKHtcbiAgICAgIC4uLnByZXYsXG4gICAgICBbaW5zdGFuY2VJZF06IG5ld1JvdGF0aW9uXG4gICAgfSkpO1xuXG4gICAgY29uc3QgY29tcG9uZW50ID0gY29tcG9uZW50cy5maW5kKGNvbXAgPT4gY29tcC5pbnN0YW5jZUlkID09PSBpbnN0YW5jZUlkKTtcbiAgICBpZiAoY29tcG9uZW50ICYmIG9uQ29tcG9uZW50QWRkKSB7XG4gICAgICBvbkNvbXBvbmVudEFkZCh7XG4gICAgICAgIC4uLmNvbXBvbmVudCxcbiAgICAgICAgcm90YXRpb246IG5ld1JvdGF0aW9uXG4gICAgICB9LCAnbW92ZScpO1xuICAgIH1cbiAgICBzZXRDb250ZXh0TWVudSh7IHZpc2libGU6IGZhbHNlLCB4OiAwLCB5OiAwLCBpbnN0YW5jZUlkOiAnJyB9KTtcbiAgfTtcbiAgXG4gIGNvbnN0IFt7IGlzT3ZlciB9LCBkcm9wXSA9IHVzZURyb3AoKCkgPT4gKHtcbiAgICBhY2NlcHQ6IFwibGlicmFyeUl0ZW1cIixcbiAgICBkcm9wOiAoaXRlbTogTGlicmFyeUl0ZW0sIG1vbml0b3IpID0+IHtcbiAgICAgIGNvbnN0IG9mZnNldCA9IG1vbml0b3IuZ2V0Q2xpZW50T2Zmc2V0KCk7XG4gICAgICBpZiAob2Zmc2V0ICYmIGNhbnZhc1JlZi5jdXJyZW50KSB7XG4gICAgICAgIGNvbnN0IHJlY3QgPSBjYW52YXNSZWYuY3VycmVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgY29uc3QgeCA9IG9mZnNldC54IC0gcmVjdC5sZWZ0O1xuICAgICAgICBjb25zdCB5ID0gb2Zmc2V0LnkgLSByZWN0LnRvcDtcbiAgICAgICAgaGFuZGxlRHJvcChpdGVtLCB4LCB5KTtcbiAgICAgIH1cbiAgICB9LFxuICAgIGNvbGxlY3Q6IChtb25pdG9yKSA9PiAoe1xuICAgICAgaXNPdmVyOiAhIW1vbml0b3IuaXNPdmVyKCksXG4gICAgfSksXG4gIH0pKTtcblxuICBjb25zdCBzYXZlQXNQTkcgPSAoKSA9PiB7XG4gICAgaWYgKCFjYW52YXNSZWYuY3VycmVudCkgcmV0dXJuO1xuICAgIGh0bWwyY2FudmFzKGNhbnZhc1JlZi5jdXJyZW50KS50aGVuKChjYW52YXMpID0+IHtcbiAgICAgIGNvbnN0IGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKTtcbiAgICAgIGxpbmsuZG93bmxvYWQgPSBcImNhbnZhcy5wbmdcIjtcbiAgICAgIGxpbmsuaHJlZiA9IGNhbnZhcy50b0RhdGFVUkwoXCJpbWFnZS9wbmdcIik7XG4gICAgICBsaW5rLmNsaWNrKCk7XG4gICAgfSk7XG4gIH07XG5cbiAgY29uc3QgcHJpbnRDYW52YXMgPSAoKSA9PiB7XG4gICAgaWYgKCFjYW52YXNSZWYuY3VycmVudCkgcmV0dXJuO1xuICAgIGh0bWwyY2FudmFzKGNhbnZhc1JlZi5jdXJyZW50KS50aGVuKChjYW52YXMpID0+IHtcbiAgICAgIGNvbnN0IG5ld1dpbmRvdyA9IHdpbmRvdy5vcGVuKCk7XG4gICAgICBpZiAobmV3V2luZG93KSB7XG4gICAgICAgIG5ld1dpbmRvdy5kb2N1bWVudC5ib2R5LmlubmVySFRNTCA9IGA8aW1nIHNyYz1cIiR7Y2FudmFzLnRvRGF0YVVSTCgpfVwiIHN0eWxlPVwid2lkdGg6MTAwJTsgaGVpZ2h0OmF1dG87XCI+YDtcbiAgICAgICAgbmV3V2luZG93LnByaW50KCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG5cbiAgLy8gSGFuZGxlIHJpZ2h0LWNsaWNrIHRvIG9wZW4gY29udGV4dCBtZW51XG4gIGNvbnN0IGhhbmRsZUNvbnRleHRNZW51ID0gKGU6IFJlYWN0Lk1vdXNlRXZlbnQsIGluc3RhbmNlSWQ6IHN0cmluZykgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBzZXRDb250ZXh0TWVudSh7XG4gICAgICB2aXNpYmxlOiB0cnVlLFxuICAgICAgeDogZS5jbGllbnRYLFxuICAgICAgeTogZS5jbGllbnRZLFxuICAgICAgaW5zdGFuY2VJZFxuICAgIH0pO1xuICB9O1xuXG4gIC8vIEhhbmRsZSBkZWxldGUgZnJvbSBjb250ZXh0IG1lbnVcbiAgY29uc3QgaGFuZGxlRGVsZXRlID0gKCkgPT4ge1xuICAgIGlmIChjb250ZXh0TWVudS5pbnN0YW5jZUlkICYmIG9uQ29tcG9uZW50RGVsZXRlKSB7XG4gICAgICBvbkNvbXBvbmVudERlbGV0ZShjb250ZXh0TWVudS5pbnN0YW5jZUlkKTtcbiAgICB9XG4gICAgc2V0Q29udGV4dE1lbnUoeyB2aXNpYmxlOiBmYWxzZSwgeDogMCwgeTogMCwgaW5zdGFuY2VJZDogJycgfSk7XG4gIH07XG5cbiAgLy8gSGlkZSBjb250ZXh0IG1lbnUgd2hlbiBjbGlja2luZyBlbHNld2hlcmVcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBoYW5kbGVDbGljayA9ICgpID0+IHtcbiAgICAgIGlmIChjb250ZXh0TWVudS52aXNpYmxlKSB7XG4gICAgICAgIHNldENvbnRleHRNZW51KHsgdmlzaWJsZTogZmFsc2UsIHg6IDAsIHk6IDAsIGluc3RhbmNlSWQ6ICcnIH0pO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGhhbmRsZUNsaWNrKTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCBoYW5kbGVDbGljayk7XG4gICAgfTtcbiAgfSwgW2NvbnRleHRNZW51LnZpc2libGVdKTtcblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbFwiPlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LWZ1bGwgcC0yXCI+XG4gICAgICAgIDxkaXZcbiAgICAgICAgICByZWY9eyhub2RlKSA9PiB7XG4gICAgICAgICAgICBkcm9wKG5vZGUpO1xuICAgICAgICAgICAgY2FudmFzUmVmLmN1cnJlbnQgPSBub2RlO1xuICAgICAgICAgIH19XG4gICAgICAgICAgY2xhc3NOYW1lPXtgcmVsYXRpdmUgYmctWyNlZmYwZjFdIHctZnVsbCBoLVs1NjBweF0gJHtcbiAgICAgICAgICAgIGlzT3ZlciA/IFwiYm9yZGVyLTIgYm9yZGVyLWJsdWUtNTAwXCIgOiBcIlwiXG4gICAgICAgICAgfWB9XG4gICAgICAgID5cbiAgICAgICAgICB7Y29tcG9uZW50cz8ubWFwKChpdGVtKSA9PiAoXG4gICAgICAgICAgICA8RHJhZ2dhYmxlXG4gICAgICAgICAgICAgIGtleT17aXRlbS5pbnN0YW5jZUlkfVxuICAgICAgICAgICAgICBkZWZhdWx0UG9zaXRpb249e3sgeDogaXRlbS54LCB5OiBpdGVtLnkgfX1cbiAgICAgICAgICAgICAgcG9zaXRpb249e3Bvc2l0aW9uc1tpdGVtLmluc3RhbmNlSWRdfVxuICAgICAgICAgICAgICBvblN0b3A9eyhlLCBkYXRhKSA9PiBoYW5kbGVEcmFnU3RvcChpdGVtLmluc3RhbmNlSWQsIGRhdGEpfVxuICAgICAgICAgICAgICBib3VuZHM9XCJwYXJlbnRcIlxuICAgICAgICAgICAgICBoYW5kbGU9XCIuZHJhZy1oYW5kbGVcIlxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8ZGl2IFxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImFic29sdXRlIGN1cnNvci1tb3ZlXCJcbiAgICAgICAgICAgICAgICBvbkNvbnRleHRNZW51PXsoZSkgPT4gaGFuZGxlQ29udGV4dE1lbnUoZSwgaXRlbS5pbnN0YW5jZUlkKX1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxkaXYgXG4gICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJkcmFnLWhhbmRsZSB3LTEyIGgtMTIgcmVsYXRpdmVcIlxuICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZEltYWdlOiBgdXJsKCR7aXRlbS5zdmd9KWAsXG4gICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRTaXplOiBcImNvbnRhaW5cIixcbiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZFJlcGVhdDogXCJuby1yZXBlYXRcIixcbiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZFBvc2l0aW9uOiBcImNlbnRlclwiLFxuICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IGByb3RhdGUoJHtyb3RhdGlvbnNbaXRlbS5pbnN0YW5jZUlkXSB8fCAwfWRlZylgLFxuICAgICAgICAgICAgICAgICAgICB0cmFuc2l0aW9uOiAndHJhbnNmb3JtIDAuM3MgZWFzZSdcbiAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L0RyYWdnYWJsZT5cbiAgICAgICAgICApKX1cblxuICAgICAgICAgIHsvKiBDb250ZXh0IE1lbnUgKi99XG4gICAgICAgICAge2NvbnRleHRNZW51LnZpc2libGUgJiYgKFxuICAgICAgICAgICAgPGRpdiBcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiZml4ZWQgYmctd2hpdGUgc2hhZG93LWxnIHJvdW5kZWQtbWQgcHktMiB6LTUwXCJcbiAgICAgICAgICAgICAgc3R5bGU9e3sgdG9wOiBjb250ZXh0TWVudS55LCBsZWZ0OiBjb250ZXh0TWVudS54IH19XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIDxidXR0b24gXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIHRleHQtbGVmdCBweC00IHB5LTIgaG92ZXI6YmctZ3JheS0xMDBcIlxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IGhhbmRsZVJvdGF0ZShjb250ZXh0TWVudS5pbnN0YW5jZUlkLCA5MCl9XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICBSb3RhdGUgOTDCsFxuICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgPGJ1dHRvbiBcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LWZ1bGwgdGV4dC1sZWZ0IHB4LTQgcHktMiBob3ZlcjpiZy1ncmF5LTEwMFwiXG4gICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gaGFuZGxlUm90YXRlKGNvbnRleHRNZW51Lmluc3RhbmNlSWQsIDE4MCl9XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICBSb3RhdGUgMTgwwrBcbiAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgIDxidXR0b24gXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIHRleHQtbGVmdCBweC00IHB5LTIgaG92ZXI6YmctZ3JheS0xMDAgdGV4dC1yZWQtNjAwXCJcbiAgICAgICAgICAgICAgICBvbkNsaWNrPXtoYW5kbGVEZWxldGV9XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICBEZWxldGVcbiAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICApfVxuICAgICAgICA8L2Rpdj5cblxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm10LTQgZmxleCBnYXAtNFwiPlxuICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgIG9uQ2xpY2s9e3NhdmVBc1BOR31cbiAgICAgICAgICAgIGNsYXNzTmFtZT1cImJnLWJsdWUtNTAwIHRleHQtd2hpdGUgcHgtNCBweS0yIHJvdW5kZWQgc2hhZG93IGhvdmVyOmJnLWJsdWUtNjAwXCJcbiAgICAgICAgICA+XG4gICAgICAgICAgICBTYXZlIGFzIFBOR1xuICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgIG9uQ2xpY2s9e3ByaW50Q2FudmFzfVxuICAgICAgICAgICAgY2xhc3NOYW1lPVwiYmctZ3JlZW4tNTAwIHRleHQtd2hpdGUgcHgtNCBweS0yIHJvdW5kZWQgc2hhZG93IGhvdmVyOmJnLWdyZWVuLTYwMFwiXG4gICAgICAgICAgPlxuICAgICAgICAgICAgUHJpbnQgQ2FudmFzXG4gICAgICAgICAgPC9idXR0b24+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBDYW52YXM7Il0sIm5hbWVzIjpbIlJlYWN0IiwidXNlUmVmIiwidXNlRWZmZWN0IiwidXNlU3RhdGUiLCJEcmFnZ2FibGUiLCJ1c2VEcm9wIiwiaHRtbDJjYW52YXMiLCJDYW52YXMiLCJmaWxlSWQiLCJvbkRyYWdTdGFydCIsImRyYWdnZWRJbWFnZSIsIm9uRHJvcENvbXBsZXRlIiwib25Db21wb25lbnRBZGQiLCJjb21wb25lbnRzIiwib25Db21wb25lbnREZWxldGUiLCJjYW52YXNSZWYiLCJwb3NpdGlvbnMiLCJzZXRQb3NpdGlvbnMiLCJyb3RhdGlvbnMiLCJzZXRSb3RhdGlvbnMiLCJjb250ZXh0TWVudSIsInNldENvbnRleHRNZW51IiwidmlzaWJsZSIsIngiLCJ5IiwiaW5zdGFuY2VJZCIsImluaXRpYWxQb3NpdGlvbnMiLCJpbml0aWFsUm90YXRpb25zIiwiZm9yRWFjaCIsImNvbXAiLCJyb3RhdGlvbiIsImhhbmRsZURyb3AiLCJpdGVtIiwiZHJvcFgiLCJkcm9wWSIsIm5ld0NvbXBvbmVudCIsIkRhdGUiLCJpZCIsIm5vdyIsImhhbmRsZURyYWdTdG9wIiwiZGF0YSIsInVwZGF0ZWRQb3NpdGlvbnMiLCJjb21wb25lbnQiLCJmaW5kIiwiaGFuZGxlUm90YXRlIiwiZGVncmVlcyIsImN1cnJlbnRSb3RhdGlvbiIsIm5ld1JvdGF0aW9uIiwicHJldiIsImlzT3ZlciIsImRyb3AiLCJhY2NlcHQiLCJtb25pdG9yIiwib2Zmc2V0IiwiZ2V0Q2xpZW50T2Zmc2V0IiwiY3VycmVudCIsInJlY3QiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJsZWZ0IiwidG9wIiwiY29sbGVjdCIsInNhdmVBc1BORyIsInRoZW4iLCJjYW52YXMiLCJsaW5rIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiZG93bmxvYWQiLCJocmVmIiwidG9EYXRhVVJMIiwiY2xpY2siLCJwcmludENhbnZhcyIsIm5ld1dpbmRvdyIsIndpbmRvdyIsIm9wZW4iLCJib2R5IiwiaW5uZXJIVE1MIiwicHJpbnQiLCJoYW5kbGVDb250ZXh0TWVudSIsImUiLCJwcmV2ZW50RGVmYXVsdCIsImNsaWVudFgiLCJjbGllbnRZIiwiaGFuZGxlRGVsZXRlIiwiaGFuZGxlQ2xpY2siLCJhZGRFdmVudExpc3RlbmVyIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImRpdiIsImNsYXNzTmFtZSIsInJlZiIsIm5vZGUiLCJtYXAiLCJkZWZhdWx0UG9zaXRpb24iLCJwb3NpdGlvbiIsIm9uU3RvcCIsImJvdW5kcyIsImhhbmRsZSIsIm9uQ29udGV4dE1lbnUiLCJzdHlsZSIsImJhY2tncm91bmRJbWFnZSIsInN2ZyIsImJhY2tncm91bmRTaXplIiwiYmFja2dyb3VuZFJlcGVhdCIsImJhY2tncm91bmRQb3NpdGlvbiIsInRyYW5zZm9ybSIsInRyYW5zaXRpb24iLCJidXR0b24iLCJvbkNsaWNrIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./app/(routes)/workspace/_components/Canvas.tsx\n"));

/***/ })

});